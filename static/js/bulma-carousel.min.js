!function(global,factory){if("function"==typeof define&&define.amd)define(["module","exports"],factory);else if("undefined"!=typeof exports)factory(module,exports);else{var mod={exports:{}};factory(mod,mod.exports),global.bulmaCarousel=mod.exports}}(this,function(module,exports){"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};!function(global,factory){"object"===(void 0===exports?"undefined":_typeof(exports))&&void 0!==module?module.exports=factory():"function"==typeof define&&define.amd?define("bulmaCarousel",factory):global.bulmaCarousel=factory()}(void 0,function(){var EventEmitter=function(){function EventEmitter(){var listeners=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck(this,EventEmitter),this._listeners=new Map(listeners),this._middlewares=new Map}return _createClass(EventEmitter,[{key:"listenerCount",value:function listenerCount(eventName){return this._listeners.has(eventName)?this._listeners.get(eventName).length:0}},{key:"removeListeners",value:function removeListeners(){var _this=this,eventName=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,middleware=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null!==eventName?Array.isArray(eventName)?name.forEach(function(e){return _this.removeListeners(e,middleware)}):(this._listeners.delete(eventName),middleware&&this.removeMiddleware(eventName)):this._listeners=new Map}},{key:"middleware",value:function middleware(eventName,fn){var _this2=this;Array.isArray(eventName)?name.forEach(function(e){return _this2.middleware(e,fn)}):(Array.isArray(this._middlewares.get(eventName))||this._middlewares.set(eventName,[]),this._middlewares.get(eventName).push(fn))}},{key:"removeMiddleware",value:function removeMiddleware(){var _this3=this,eventName=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==eventName?Array.isArray(eventName)?name.forEach(function(e){return _this3.removeMiddleware(e)}):this._middlewares.delete(eventName):this._middlewares=new Map}},{key:"on",value:function on(name,callback){var _this4=this,once=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(name))name.forEach(function(e){return _this4.on(e,callback)});else{name=name.toString();var split=name.split(/,|, | /);split.length>1?split.forEach(function(e){return _this4.on(e,callback)}):(Array.isArray(this._listeners.get(name))||this._listeners.set(name,[]),this._listeners.get(name).push({once:once,callback:callback}))}}},{key:"once",value:function once(name,callback){this.on(name,callback,!0)}},{key:"emit",value:function emit(name,data){var _this5=this,silent=arguments.length>2&&void 0!==arguments[2]&&arguments[2];name=name.toString();var listeners=this._listeners.get(name),middlewares=null,doneCount=0,execute=silent;if(Array.isArray(listeners))for(listeners.forEach(function(listener,index){silent||(middlewares=_this5._middlewares.get(name),Array.isArray(middlewares)?(middlewares.forEach(function(middleware){middleware(data,function(){var newData=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!==newData&&(data=newData),doneCount++},name)}),doneCount>=middlewares.length&&(execute=!0)):execute=!0),execute&&(listener.once&&(listeners[index]=null),listener.callback(data))});-1!==listeners.indexOf(null);)listeners.splice(listeners.indexOf(null),1)}}]),EventEmitter}(),supportsPassive=!1;try{var opts=Object.defineProperty({},"passive",{get:function get(){supportsPassive=!0}});window.addEventListener("testPassive",null,opts),window.removeEventListener("testPassive",null,opts)}catch(e){}return function(_EventEmitter){function Carousel(selector){_classCallCheck(this,Carousel);var _this6=_possibleConstructorReturn(this,(Carousel.__proto__||Object.getPrototypeOf(Carousel)).call(this));if(_this6._clickEvents=["touchstart","click"],_this6.carousel="string"==typeof selector?document.querySelector(selector):selector,!_this6.carousel)throw new Error("An invalid selector or non-DOM node has been provided.");return _this6.options=Object.assign({},{threshold:50,restraint:100,allowedTime:500}),_this6.init(),_this6}return _inherits(Carousel,_EventEmitter),_createClass(Carousel,[{key:"init",value:function init(){var _this7=this,forceHiddenNavigation=!1;if(this.computedStyle=window.getComputedStyle(this.carousel),this.carouselWidth=parseInt(this.computedStyle.getPropertyValue("width"),10),this.carouselContainer=this.carousel.querySelector(".carousel-container"),this.carouselItems=this.carousel.querySelectorAll(".carousel-item"),this.carouselItemsArray=Array.from(this.carouselItems),this.carousel.dataset.size&&!this.carousel.classList.contains("carousel-animate-fade")&&(this.carousel.dataset.size>=this.carouselItemsArray.length?(this.offset=0,forceHiddenNavigation=!0):this.offset=this.carouselWidth/this.carousel.dataset.size,this.carouselContainer.style.left=0-this.offset+"px",this.carouselContainer.style.transform="translateX("+this.offset+"px)",[].forEach.call(this.carouselItems,function(carouselItem){carouselItem.style.flexBasis=_this7.offset+"px"})),this._initNavigation(forceHiddenNavigation),this.carousel.classList.contains("carousel-animate-fade")&&this.carouselItems.length){var img=this.carouselItems[0].querySelector("img"),scale=1;img.naturalWidth?(scale=this.carouselWidth/img.naturalWidth,this.carouselContainer.style.height=img.naturalHeight*scale+"px"):img.onload=function(){scale=_this7.carouselWidth/img.naturalWidth,_this7.carouselContainer.style.height=img.naturalHeight*scale+"px"}}this.currentItem={carousel:this.carousel,node:null,pos:-1},this.currentItem.node=this.carousel.querySelector(".carousel-item.is-active"),this.currentItem.pos=this.currentItem.node?this.carouselItemsArray.indexOf(this.currentItem.node):-1,this.currentItem.node||(this.currentItem.node=this.carouselItems[0],this.currentItem.node.classList.add("is-active"),this.currentItem.pos=0),this._setOrder(),this.carousel.dataset.autoplay&&"true"==this.carousel.dataset.autoplay&&this._autoPlay(this.carousel.dataset.delay||5e3),this._bindEvents(),this.emit("carousel:ready",this.currentItem)}},{key:"_initNavigation",value:function _initNavigation(){var forceHidden=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.previousControl=this.carousel.querySelector(".carousel-nav-left"),this.nextControl=this.carousel.querySelector(".carousel-nav-right"),(this.carouselItems.length<=1||forceHidden)&&(this.carouselContainer&&(this.carouselContainer.style.left="0"),this.previousControl&&(this.previousControl.style.display="none"),this.nextControl&&(this.nextControl.style.display="none"))}},{key:"_bindEvents",value:function _bindEvents(){var _this8=this;this.previousControl&&this._clickEvents.forEach(function(clickEvent){_this8.previousControl.addEventListener(clickEvent,function(e){e.preventDefault(),_this8._slide("previous"),_this8._autoPlayInterval&&(clearInterval(_this8._autoPlayInterval),_this8._autoPlay(_this8.carousel.dataset.delay||5e3))},!!supportsPassive&&{passive:!0})}),this.nextControl&&this._clickEvents.forEach(function(clickEvent){_this8.nextControl.addEventListener(clickEvent,function(e){e.preventDefault(),_this8._slide("next"),_this8._autoPlayInterval&&(clearInterval(_this8._autoPlayInterval),_this8._autoPlay(_this8.carousel.dataset.delay||5e3))},!!supportsPassive&&{passive:!0})}),this.carousel.addEventListener("touchstart",function(e){_this8._swipeStart(e)},!!supportsPassive&&{passive:!0}),this.carousel.addEventListener("touchmove",function(e){supportsPassive||e.preventDefault()},!!supportsPassive&&{passive:!0}),this.carousel.addEventListener("touchend",function(e){_this8._swipeEnd(e)},!!supportsPassive&&{passive:!0})}},{key:"_next",value:function _next(element){return element.nextElementSibling?element.nextElementSibling:this.carouselItems[0]}},{key:"_previous",value:function _previous(element){return element.previousElementSibling?element.previousElementSibling:this.carouselItems[this.carouselItems.length-1]}},{key:"_setOrder",value:function _setOrder(){this.currentItem.node.style.order="1",this.currentItem.node.style.zIndex="1";var item=this.currentItem.node,i=void 0,j=void 0,ref=void 0;for(i=j=2,ref=this.carouselItemsArray.length;2<=ref?j<=ref:j>=ref;i=2<=ref?++j:--j)item=this._next(item),item.style.order=""+i%this.carouselItemsArray.length,item.style.zIndex="0"}},{key:"_swipeStart",value:function _swipeStart(e){e.preventDefault(),e=e||window.event,e="changedTouches"in e?e.changedTouches[0]:e,this._touch={start:{time:(new Date).getTime(),x:e.pageX,y:e.pageY},dist:{x:0,y:0}}}},{key:"_swipeEnd",value:function _swipeEnd(e){e.preventDefault(),e=e||window.event,e="changedTouches"in e?e.changedTouches[0]:e,this._touch.dist={x:e.pageX-this._touch.start.x,y:e.pageY-this._touch.start.y},this._handleGesture()}},{key:"_handleGesture",value:function _handleGesture(){(new Date).getTime()-this._touch.start.time<=this.options.allowedTime&&Math.abs(this._touch.dist.x)>=this.options.threshold&&Math.abs(this._touch.dist.y)<=this.options.restraint&&(this._touch.dist.x<0?this._slide("next"):this._slide("previous"))}},{key:"_slide",value:function _slide(){var _this9=this,direction=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";this.carouselItems.length&&(this.oldItemNode=this.currentItem.node,this.emit("carousel:slide:before",this.currentItem),"previous"===direction?(this.currentItem.node=this._previous(this.currentItem.node),this.carousel.classList.contains("carousel-animate-fade")||(this.carousel.classList.add("is-reversing"),this.carouselContainer.style.transform="translateX("+-Math.abs(this.offset)+"px)")):(this.currentItem.node=this._next(this.currentItem.node),this.carousel.classList.remove("is-reversing"),this.carouselContainer.style.transform="translateX("+Math.abs(this.offset)+"px)"),this.currentItem.node.classList.add("is-active"),this.oldItemNode.classList.remove("is-active"),this.carousel.classList.remove("carousel-animated"),setTimeout(function(){_this9.carousel.classList.add("carousel-animated")},50),this._setOrder(),this.emit("carousel:slide:after",this.currentItem))}},{key:"_autoPlay",value:function _autoPlay(){var _this10=this,delay=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;this._autoPlayInterval=setInterval(function(){_this10._slide("next")},delay)}}],[{key:"attach",value:function attach(){var selector=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".carousel, .hero-carousel",carouselInstances=new Array,carousels=document.querySelectorAll(selector);return[].forEach.call(carousels,function(carousel){setTimeout(function(){carouselInstances.push(new Carousel(carousel))},100)}),carouselInstances}}]),Carousel}(EventEmitter)})}),function(global,factory){if("function"==typeof define&&define.amd)define([],factory);else if("undefined"!=typeof exports)factory();else{var mod={exports:{}};factory(),global.bulmaCarousel=mod.exports}}(this,function(){"use strict"});
//# sourceMappingURL=./bulma-carousel.min.js.map